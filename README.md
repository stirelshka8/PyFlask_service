# **FlaPy - это каркас разарботанный мной для реализации последующих проектов.**

### _Всем кто желает улучшить/дополнить/исправить мое почтение и велкомя))_

### А теперь о серьезном!


## В данное время реализованы следующие функции:

### APP.PY

* Импорты и настройка: Код начинается с импорта необходимых библиотек и настройки основных параметров приложения, таких как база данных, сессии, и настройки для роутинга и разработки.

* Роутинг и регистрация маршрутов: В коде регистрируются различные маршруты для приложения, включая маршруты для статей, администрирования и пользователей. Это позволяет разделить функциональность приложения на различные секции и под-приложения.

* Настройка и использование Flask-Principal: Flask-Principal используется для управления правами доступа к различным частям приложения, а также для работы с ролями.

* Инициализация Flask-SocketIO: Flask-SocketIO инициализируется для поддержки обмена сообщениями в реальном времени (чат).

* Инициализация и настройка Flask-Login: Flask-Login используется для управления аутентификацией пользователей.

* Инициализация и настройка Flask-CKEditor: Flask-CKEditor предоставляет редактор текста CKEditor для создания и редактирования статей.

* Инициализация и настройка Flask-Migrate: Flask-Migrate используется для управления миграциями базы данных.

* Настройка и использование сессий: Сессии настраиваются и могут быть хранены в Redis или файловой системе в зависимости от указанных настроек.

* Определение функций для обработки запросов: В коде определены различные функции для обработки запросов, такие как страница индекса, страница "О нас", страница чата, добавление контакта и другие.

* Интеграция с WebSocket (Socket.IO): Реализована возможность обмена сообщениями в реальном времени через WebSocket с использованием Flask-SocketIO. Это позволяет пользователям чата отправлять и принимать сообщения в режиме реального времени.

* Запуск приложения: Приложение запускается с помощью app.run(), который инициирует его выполнение.

### USER_ROUTERS.PY

* Маршрут **/logout**: При обращении к этому маршруту пользователь выходит из системы. Сеанс пользователя очищается, и выводится уведомление об успешном выходе.

* Маршрут **/user/<username>**: Отображает профиль пользователя с указанным именем. Показывает информацию о пользователе, список его статей, дату регистрации и другие статистические данные.

* Маршрут **/register**: Позволяет пользователям зарегистрироваться в системе. При отправке данных формы регистрации выполняется проверка, и если данные корректны, новый пользователь добавляется в базу данных.

* Маршрут **/login**: Предоставляет возможность пользователям войти в систему. Проверяет введенные учетные данные и, при успешной аутентификации, устанавливает сеанс пользователя.

* Маршрут **/update_user_info**: Позволяет зарегистрированным пользователям обновить информацию о себе, такую как имя и дополнительная информация.

* Маршрут **/update_pass**: Позволяет пользователям сменить пароль. Обновляет пароль пользователя в базе данных.

* Маршрут **/dashboard**: Отображает личную страницу пользователя (панель управления), где пользователь может создавать новые статьи и управлять ими. Отображает статьи пользователя, пагинацию и форму для создания новой статьи.

* Маршрут **/send_message**: Позволяет пользователю отправлять сообщения другим пользователям. Сохраняет сообщения и уведомляет о новых сообщениях.

* Маршрут **/messages**: Отображает страницу сообщений, где пользователь может просматривать полученные и отправленные сообщения, адресную книгу и новые уведомления.

* Маршрут **/get_messages/<recipient_username>**: Получает сообщения между текущим пользователем и указанным получателем.

* Маршрут **/mark_as_read/<notification_id>**: Помечает уведомление как прочитанное.

* Маршрут **/add_to_address_book**: Позволяет пользователю добавить другого пользователя в адресную книгу.

* Маршрут **/ignore_notification/<notification_id>**: Помечает уведомление как проигнорированное.

* Маршрут **/read_message/<recipient_username>**: Помечает сообщение как прочитанное.

### ARTICLES_ROUTERS.PY

* Маршрут **/delete_article/int:id/**: Позволяет удалить статью. Если текущий пользователь является автором статьи или имеет права администратора, статья удаляется из базы данных, а также удаляются все комментарии к этой статье.

* Маршрут **/edit_article/int:id/**: Позволяет редактировать статью. Если текущий пользователь является автором статьи или имеет права администратора, ему предоставляется форма для редактирования статьи. После редактирования статья сохраняется в базе данных.

* Маршрут **/article/int:id**/: Отображает страницу статьи. Показывает заголовок, содержание статьи, автора, дату создания и комментарии к статье. Пользователи могут оставлять комментарии.

* Маршрут **/articles**: Отображает список статей. Статьи отображаются в порядке убывания даты создания. Для каждой статьи показывается количество комментариев и понравившихся. Пользователи могут просматривать статьи и оставлять комментарии.

* Маршрут **/delete_rejected_articles**: Позволяет администраторам удалить все статьи со статусом "отклонена". Удаляются записи о статьях и все связанные с ними комментарии.

* Маршрут **/add_comment/int:id**: Позволяет пользователям добавлять комментарии к статьям. После проверки формы комментария, комментарий сохраняется в базе данных и отображается на странице статьи.

* Маршрут **/delete_comment/int:comment_id**: Позволяет пользователю удалить свой комментарий. Если текущий пользователь является автором комментария и статьи, к которой он относится, он может удалить комментарий.

* Маршрут /**like_article/int:id**: Позволяет пользователям ставить "лайки" статьям. Если пользователь уже поставил "лайк", он может удалить его. "Лайк" учитывается в базе данных и отображается на странице статьи.

### ADMIN_ROUTERS.PY

* Маршрут **/moderate**: Этот маршрут предоставляет доступ к странице модерации. Пользователям с ролями "moder" и "admin" разрешено выполнять модерацию. На этой странице они могут видеть статьи, ожидающие модерации.

#### Модерирование

* Отображение статей: Статьи, ожидающие модерации (со статусом "ожидает модерации"), отображаются на странице модерации. Каждая статья отображается с возможностью изменения её статуса (принята или отклонена).

* Изменение статуса статьи: Модераторы и администраторы могут изменять статус статьи, выбирая один из доступных статусов ("принята" или "отклонена"). При выборе статуса "отклонена", они также могут добавить комментарий к отклонению. После изменения статуса статьи, эта информация сохраняется в базе данных.

* Пагинация: Страница модерации поддерживает пагинацию для более удобного просмотра статей. Каждая страница отображает определенное количество статей.

## Запуск:

Для запуска в режиме разработки воспользуйтесь командой:

`python3 app.py ` для отображения дебаг информации `debug=False` замените на `debug=True`.

Для запуска в боевом режиме воспользуйтесь командой:

`python3 wsgi.py `

## ***********************************************************

[Документаци Flask](https://flask.palletsprojects.com/en/latest/quickstart/)
